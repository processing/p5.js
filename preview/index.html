<!DOCTYPE html>
<html>

<head>
  <title>P5 test</title>
  <meta http-equiv="pragma" content="no-cache" />
  <meta http-equiv="cache-control" content="no-cache" />
  <meta charset="utf-8">

  <style>
    body {
      margin: 0;
      overflow: hidden;
    }
  </style>
</head>

<body>
  <script type="module">
    import p5 from '../src/app.js';

    const sketch = function (p) {
      let fbo;
      p.setup = async function () {
        p.createCanvas(400, 400, p.WEBGL);
        fbo = p.createFramebuffer()
      };

      p.draw = function () {
        p.push();
        p.background(200);
        fbo.begin()
        p.background('blue')
        p.strokeWeight(10);
        p.push()
        p.stroke('red')
        p.line(-100, -100, 100, 100);
        p.pop()
        p.translate(200, 200)
        p.line(-100, -100, 100, 100);
        fbo.end()
        p.image(fbo, 0, 0)
        p.pop();
      };
    };

    new p5(sketch);
  </script>
</body>

</html>